{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 py-6">
  <h1 class="text-2xl font-bold mb-4">ðŸ’¼ Planes para crecer</h1>
  <p class="text-gray-700 mb-6">ElegÃ­ un plan diferente para cada una de tus cafeterÃ­as. PodÃ©s cambiarlos en cualquier momento.</p>

  {% if cafes %}
    <ul class="space-y-6">
      {% for cafe in cafes %}
        <li class="bg-white p-5 rounded-xl shadow border">
          <h2 class="text-lg font-semibold">{{ cafe.name }} 
            <span class="text-sm text-gray-500">â€“ {{ cafe.location }}</span>
          </h2>
          <p class="mt-2 text-sm text-gray-700">
            Plan actual:
            {% if cafe.visibility_level == 2 %}
              â˜•â˜• <strong>Plan Maestro</strong> â€“ nivel superior
            {% elif cafe.visibility_level == 1 %}
              â˜• <strong>Plan Barista</strong> â€“ intermedio
            {% else %}
              â˜• <strong>Gratuito</strong> â€“ nivel base
            {% endif %}
          </p>

          <form method="post" class="mt-4 space-y-2">
            {% csrf_token %}
            <input type="hidden" name="cafe_id" value="{{ cafe.id }}">
            <label for="nivel-{{ cafe.id }}" class="block text-sm font-medium text-gray-700">Cambiar plan:</label>
            <select id="nivel-{{ cafe.id }}" name="nivel" required
              class="w-full mt-1 block border-gray-300 rounded-md shadow-sm text-sm px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
              <option value="0" {% if cafe.visibility_level == 0 %}selected{% endif %}>â˜• Gratuito â€“ nivel base</option>
              <option value="1" {% if cafe.visibility_level == 1 %}selected{% endif %}>â˜• Plan Barista â€“ intermedio</option>
              <option value="2" {% if cafe.visibility_level == 2 %}selected{% endif %}>â˜•â˜• Plan Maestro â€“ nivel superior</option>
            </select>
            <button type="submit"
              class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-4 py-2 rounded transition">
              Aplicar
            </button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-600">No tenÃ©s cafeterÃ­as registradas todavÃ­a.</p>
  {% endif %}
</div>
{% endblock %}
