<!DOCTYPE html>
<html lang="es">
{% load static %}
  <link rel="stylesheet" href="{% static 'css/animations.css' %}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Gota - Rese√±as de Caf√©s{% endblock %}</title>
  {% block meta %}{% endblock %}

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
          },
          colors: {
            primary: '#1e3a8a',      // Azul profundo
            accent: '#2dd4bf',       // Verde menta (acento principal)
            accentHover: '#14b8a6',  // Verde jade (hover)
            secondary: '#f9fafb',    // Fondo claro
            dark: '#111827',         // Texto oscuro
            light: '#f9fafb'         // Fondo claro alternativo
}
        }
      }
    }
  </script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <!-- Custom CSS -->
  <link href="{% static 'css/custom.css' %}" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

  <!-- Swiper & Leaflet CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    html, body { overflow-x: hidden; }
  </style>
</head>

<body class="bg-light text-dark font-sans">
  <div class="min-h-screen flex flex-col">

    <!-- Navbar -->
    <header class="bg-white shadow fixed w-full z-50">
      <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
        <a href="{% url 'home' %}" class="text-2xl font-bold text-primary">Gota</a>

        <button id="menu-toggle" class="lg:hidden text-primary focus:outline-none text-2xl">
          <i class="fas fa-bars"></i>
        </button>

        <nav id="navbar-menu" class="hidden lg:flex lg:items-center lg:gap-6 absolute lg:static top-full left-0 right-0 z-40 bg-white lg:bg-transparent px-6 py-4 lg:p-0 shadow-md lg:shadow-none">
          <a href="{% url 'home' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">Inicio</a>
          <a href="{% url 'cafe_list' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">Caf√©s</a>
          <a href="{% url 'mapa_cafes' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">üìç Mapa</a>

          {% if user.is_authenticated %}
            <a href="{% url 'favorite_cafes' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">‚ù§Ô∏è Favoritos</a>
          {% endif %}

          {% if user.is_authenticated and user.is_owner %}
            <a href="{% url 'create_cafe' %}" class="text-sm hover:underline">‚ûï Agregar Caf√©</a>
            <a href="{% url 'owner_dashboard' %}" class="hover:underline">Mis Caf√©s</a>
          {% endif %}

          <a href="{% url 'about' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">Acerca de</a>
          <a href="{% url 'contact' %}" class="block py-2 lg:py-0 text-gray-700 hover:text-primary">Contacto</a>

          {% if user.is_authenticated %}
            <div class="flex items-center gap-3 mt-4 lg:mt-0 lg:ml-6">
              <span class="font-semibold text-gray-800">Hola, {{ user.username }}</span>
              {% if user.avatar %}
                <img src="{{ user.avatar.url }}" alt="Avatar" class="w-8 h-8 rounded-full border object-cover" />
              {% endif %}
              <a href="{% url 'account_logout' %}" class="text-red-500 hover:underline text-sm">Cerrar sesi√≥n</a>
            </div>
          {% else %}
            <div class="mt-4 lg:mt-0 lg:ml-6">
              <a href="{% url 'account_login' %}" class="text-primary hover:underline">Iniciar sesi√≥n</a>
            </div>
          {% endif %}
        </nav>

      </div>
    </header>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("menu-toggle");
        const menu = document.getElementById("navbar-menu");
        toggle.addEventListener("click", () => {
          menu.classList.toggle("hidden");
        });
      });
    </script>

    <!-- Contenido principal -->
    <main class="flex-1 container mx-auto px-4 py-6 pt-24">
      {% if messages %}
        <div class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 space-y-2">
          {% for message in messages %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded shadow animate-fade-in">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t py-4 text-center text-sm text-gray-500">
      ¬© 2025 Gota ‚Äì Una app de Roma ‚òï
    </footer>
  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  {% block scripts %}{% endblock %}

  <!-- Swiper config -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      new Swiper('.swiper-container', {
        slidesPerView: 'auto',
        spaceBetween: 16,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
      });
    });
  </script>
</body>
</html>
